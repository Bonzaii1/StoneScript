//MUSHROOM FOREST SCRIPT
// -Bezerra, the Sage

var poisonHammer
poisonHammer = ascii
#<∞]#
##║##
##ˈ##
asciiend

func drawLoadout()
    draw.Box(3, 15, 10, 10, #FFFF00, 1)
    >o5,18,#blue,@item.left@
    >o5,22,#blue,@item.right@
    >o5,30,#green,@poisonHammer@

func speak(message)
    >o-10,0,#red,@message@

func setAttack(itemLeft)
    equipL @itemLeft@
    equipR compound shield *9

func setAttackSpeed()
    equipL sword
    equipR moon

func setSpeed(itemRight)
    equipL triskelion
    equip @itemRight@

func setDash(itemLeft)
    equipL @itemLeft@
    equipR dashing shield

func setPickup(itemRight)
    equipL star
    equipR @itemRight@

var loops = 1
var run = 0
var recovering = false

?loc=Mushroom
   >`0,1,Current Time = @time.FormatCasual(totaltime)@
    >`0,2,Run # = @loops@
    >`65,0,Fastest Run = @time.FormatCasual(loc.bestTime)@ 
    ?run = 0
        >`0,0,Prev Run = First Run :p
    :
        >`0,0,Prev Run = @time.FormatCasual(run)@
    ?loc.loop
        loops++
    ?time <=1
        disable abilities
        disable loadout input
        disable hud abu
        setSpeed("compound shield")
    ?time >= 0 & time <= (30*5)
        var face = "@~@"
        speak("Shrooooooooms")
        >( @face@
    ?foe
        ?foe = mushroom_boss | foe = mushroom_boss_fat | foe = mushroom_boss_skinny
            ?ai.paused | ai.enabled = false
                speak("Long ahh cutscene frfr :/")
                >( Ò,ó
            :
                >`65,1,Current State = @foe.state@
                >`0,2,Distance = @foe.distance@
                
                ?recovering = false & armor < 2 & foe = mushroom_boss_fat
                    recovering = true
                    equipL mind
                :?recovering = false
                    ?foe = mushroom_boss_skinny   
                        speak("OH UR MINE NOW BOI!")
                        >( ʘ‿ʘ
                    ?foe.distance <= 5
                        ?foe.armor > 1
                            setAttack("poison hammer")
                        :
                            setAttackSpeed("sword")
                    :?foe.distance > 5 & foe.distance <= 15
                        setDash()
                    :?foe.distance > 15
                        setSpeed("compound shield")
                :?recovering = true
                    ?foe = mushroom_boss_fat
                        speak("WOAH THERE BUDDY!")
                        equipL poison wand
                        equipR compound shield
                        ?armor = maxarmor
                            recovering = false
                    :
                        recovering = false
                    
        :
            >( ☉ ‿ ⚆
            ?foe.distance > 15
                setSpeed("compound shield")
            :?foe.distance > 10 & foe.distance <=15
                ?foe.count > 1
                    equip bardiche
                :   
                    setAttack("sword *10")
    :?pickup.distance < 5
        setPickup("compound shield")
    :
        setSpeed("compound shield")
        

    ?ai.paused & foe.count = 0   
        run = totaltime
        ?fastest_run = 0 | run < fastest_run
            fastest_run = run 
        speak("Absolutely dogged on kid >:)")